import React, { useState } from 'react';
import { CheckCircle, User, Award, TrendingUp } from 'lucide-react';

const questions = [
  {
    id: 1,
    text: "Face √† un serveur qui ne r√©pond plus, votre premi√®re action :",
    options: [
      { text: "V√©rifier les logs syst√®me pour identifier la cause", profile: "analytique" },
      { text: "Red√©marrer le service pour r√©tablir rapidement", profile: "pragmatique" },
      { text: "Contacter l'√©quipe pour √©viter les impacts", profile: "communicant" },
      { text: "Basculer sur le serveur de secours imm√©diatement", profile: "preventif" }
    ]
  },
  {
    id: 2,
    text: "Pour apprendre une nouvelle technologie (VMware, Docker, etc.) :",
    options: [
      { text: "Je lis la documentation technique compl√®te", profile: "methodique" },
      { text: "Je monte un lab et j'exp√©rimente directement", profile: "experimentateur" },
      { text: "Je suis des formations certifiantes", profile: "structure" },
      { text: "J'√©tudie des architectures existantes", profile: "observateur" }
    ]
  },
  {
    id: 3,
    text: "Dans votre r√¥le, vous pr√©f√©rez g√©rer :",
    options: [
      { text: "L'infrastructure et l'architecture r√©seau", profile: "architecte" },
      { text: "Les op√©rations quotidiennes et le support", profile: "operateur" },
      { text: "Les projets de migration et modernisation", profile: "innovateur" },
      { text: "La s√©curit√© et la conformit√©", profile: "securitaire" }
    ]
  },
  {
    id: 4,
    text: "Face √† une infrastructure vieillissante :",
    options: [
      { text: "Je planifie une refonte compl√®te", profile: "visionnaire" },
      { text: "Je maintiens et optimise l'existant", profile: "mainteneur" },
      { text: "Je documente les risques pour la direction", profile: "communicant" },
      { text: "Je migre progressivement par √©tapes", profile: "strategique" }
    ]
  },
  {
    id: 5,
    text: "Dans la gestion de vos syst√®mes, vous privil√©giez :",
    options: [
      { text: "La stabilit√© et la fiabilit√© avant tout", profile: "prudent" },
      { text: "Les performances et l'optimisation", profile: "optimiseur" },
      { text: "L'automatisation et la simplicit√©", profile: "automatiseur" },
      { text: "L'√©volutivit√© et la scalabilit√©", profile: "scaleur" }
    ]
  },
  {
    id: 6,
    text: "Un utilisateur signale un probl√®me de connexion r√©seau :",
    options: [
      { text: "Je diagnostique m√©thodiquement chaque couche OSI", profile: "methodique" },
      { text: "Je teste les solutions habituelles rapidement", profile: "pragmatique" },
      { text: "Je v√©rifie si d'autres utilisateurs sont impact√©s", profile: "globaliste" },
      { text: "Je documente le ticket et proc√®de par √©tapes", profile: "organisateur" }
    ]
  },
  {
    id: 7,
    text: "Votre approche de la supervision (monitoring) :",
    options: [
      { text: "Alertes sur tous les param√®tres critiques", profile: "vigilant" },
      { text: "Monitoring cibl√© sur les services essentiels", profile: "selectif" },
      { text: "Dashboards complets avec m√©triques d√©taill√©es", profile: "analytique" },
      { text: "Automatisation des actions correctives", profile: "automatiseur" }
    ]
  },
  {
    id: 8,
    text: "Lors d'une maintenance planifi√©e qui se complique :",
    options: [
      { text: "J'applique la proc√©dure de rollback", profile: "prudent" },
      { text: "Je cherche une solution pour finaliser", profile: "perseverant" },
      { text: "Je communique sur le d√©lai suppl√©mentaire", profile: "transparent" },
      { text: "J'active le plan de contingence", profile: "preventif" }
    ]
  },
  {
    id: 9,
    text: "Votre environnement de travail id√©al :",
    options: [
      { text: "Salle serveur calme avec mes syst√®mes", profile: "technique" },
      { text: "Bureau avec interactions √©quipe IT", profile: "collaboratif" },
      { text: "Mixte : remote et on-site", profile: "flexible" },
      { text: "Peu importe tant que j'ai mes outils", profile: "adaptable" }
    ]
  },
  {
    id: 10,
    text: "Un coll√®gue moins exp√©riment√© vous sollicite :",
    options: [
      { text: "Je lui explique la th√©orie et la pratique", profile: "pedagogique" },
      { text: "Je lui montre o√π trouver l'information", profile: "autonomiseur" },
      { text: "On r√©sout le probl√®me ensemble", profile: "collaboratif" },
      { text: "Je r√®gle rapidement pour qu'il observe", profile: "efficace" }
    ]
  },
  {
    id: 11,
    text: "Pour choisir entre deux solutions techniques :",
    options: [
      { text: "Comparatif d√©taill√© avec benchmark", profile: "analytique" },
      { text: "Je m'appuie sur mon exp√©rience pass√©e", profile: "experientiel" },
      { text: "Je choisis la plus r√©pandue du march√©", profile: "consensus" },
      { text: "J'opte pour la plus moderne et √©volutive", profile: "innovateur" }
    ]
  },
  {
    id: 12,
    text: "Votre rapport √† la documentation technique :",
    options: [
      { text: "Je documente toutes mes interventions", profile: "rigoureux" },
      { text: "Je documente les proc√©dures importantes", profile: "selectif" },
      { text: "Mon infrastructure est auto-document√©e", profile: "automatiseur" },
      { text: "Je pr√©f√®re des sch√©mas et topologies", profile: "visuel" }
    ]
  },
  {
    id: 13,
    text: "Un utilisateur demande des droits administrateur :",
    options: [
      { text: "Je refuse en expliquant les risques", profile: "securitaire" },
      { text: "Je propose une alternative s√©curis√©e", profile: "constructif" },
      { text: "J'√©value le besoin r√©el avec lui", profile: "diplomatique" },
      { text: "J'accorde temporairement avec monitoring", profile: "flexible" }
    ]
  },
  {
    id: 14,
    text: "Avec plusieurs tickets urgents simultan√©s :",
    options: [
      { text: "Je les priorise selon une matrice impact/urgence", profile: "strategique" },
      { text: "Je traite le plus critique en premier", profile: "focalis√©" },
      { text: "Je les dispatche entre coll√®gues", profile: "coordinateur" },
      { text: "Je traite plusieurs en parall√®le", profile: "multitache" }
    ]
  },
  {
    id: 15,
    text: "Face √† un ancien syst√®me critique non document√© :",
    options: [
      { text: "Je planifie sa migration vers du moderne", profile: "modernisateur" },
      { text: "J'analyse et documente son fonctionnement", profile: "investigateur" },
      { text: "Je le maintiens en l'√©tat sans y toucher", profile: "conservateur" },
      { text: "Je le virtualise pour faciliter la gestion", profile: "innovateur" }
    ]
  },
  {
    id: 16,
    text: "Apr√®s un incident majeur :",
    options: [
      { text: "J'organise un post-mortem d√©taill√©", profile: "analytique" },
      { text: "Je corrige imm√©diatement les failles", profile: "reactif" },
      { text: "Je partage le REX avec toute l'√©quipe", profile: "communicant" },
      { text: "J'impl√©mente des solutions pr√©ventives", profile: "preventif" }
    ]
  },
  {
    id: 17,
    text: "Dans l'audit d'une infrastructure existante :",
    options: [
      { text: "Je v√©rifie la conformit√© aux normes", profile: "normalisateur" },
      { text: "J'identifie les points d'am√©lioration", profile: "ameliorateur" },
      { text: "Je mesure les performances actuelles", profile: "evaluateur" },
      { text: "Je valide la s√©curit√© et les risques", profile: "securitaire" }
    ]
  },
  {
    id: 18,
    text: "Votre veille technologique se concentre sur :",
    options: [
      { text: "Les nouvelles solutions et tendances", profile: "innovateur" },
      { text: "Les mises √† jour de s√©curit√© critiques", profile: "vigilant" },
      { text: "Les retours d'exp√©rience de la communaut√©", profile: "communautaire" },
      { text: "Les besoins sp√©cifiques de mon infrastructure", profile: "pragmatique" }
    ]
  },
  {
    id: 19,
    text: "Face √† une deadline pour une mise √† jour majeure :",
    options: [
      { text: "Je n√©gocie un d√©lai r√©aliste", profile: "realiste" },
      { text: "Je mobilise l'√©quipe pour y arriver", profile: "meneur" },
      { text: "Je d√©coupe en phases d√©ployables", profile: "strategique" },
      { text: "J'intensifie mon rythme de travail", profile: "combatif" }
    ]
  },
  {
    id: 20,
    text: "Ce qui vous motive le plus dans votre m√©tier :",
    options: [
      { text: "R√©soudre des probl√®mes techniques complexes", profile: "problem_solver" },
      { text: "Garantir la disponibilit√© des services", profile: "garant" },
      { text: "Impl√©menter de nouvelles technologies", profile: "innovateur" },
      { text: "Travailler en √©quipe sur des projets", profile: "teamplayer" }
    ]
  }
];

const profiles = {
  analytique: { 
    name: "L'Analyste", 
    description: "Vous excellez dans l'analyse m√©thodique et la r√©solution de probl√®mes complexes. Votre approche syst√©matique vous permet d'identifier les causes racines et d'anticiper les cons√©quences de vos actions.",
    strengths: "Diagnostic pr√©cis gr√¢ce √† une m√©thodologie structur√©e ‚Ä¢ Capacit√© √† g√©rer des incidents complexes multi-facteurs ‚Ä¢ Excellente anticipation des probl√®mes potentiels ‚Ä¢ Documentation d√©taill√©e facilitant les interventions futures",
    advice: "En situation d'urgence critique, n'h√©sitez pas √† appliquer une solution de contournement rapide avant l'analyse compl√®te. √âquilibrez analyse et action pour optimiser votre temps de r√©solution.",
    ideal_for: "Architecte syst√®me, Expert troubleshooting, Responsable infrastructure critique",
    team_value: "Vous apportez rigueur et profondeur d'analyse. Votre m√©thodologie structure les interventions complexes et forme les juniors aux bonnes pratiques de diagnostic.",
    growth_areas: "D√©veloppez votre capacit√© √† prendre des d√©cisions rapides avec information partielle. Pratiquez le 'quick wins' sur des incidents mineurs pour gagner en agilit√©."
  },
  pragmatique: { 
    name: "Le Pragmatique", 
    description: "Vous privil√©giez l'action efficace et les solutions concr√®tes. Votre exp√©rience vous permet d'identifier rapidement les interventions les plus pertinentes sans perdre de temps.",
    strengths: "R√©solution rapide des incidents gr√¢ce √† votre exp√©rience terrain ‚Ä¢ Excellente gestion du stress en situation de crise ‚Ä¢ Capacit√© √† prioriser l'urgent et l'essentiel ‚Ä¢ Adaptation rapide aux contextes changeants",
    advice: "Investissez du temps dans la documentation de vos interventions pour construire une base de connaissances r√©utilisable. Votre expertise gagnerait √† √™tre capitalis√©e et partag√©e syst√©matiquement.",
    ideal_for: "Technicien support N3, Administrateur production, Responsable exploitation",
    team_value: "Vous √™tes le pompier de l'√©quipe, capable de r√©tablir rapidement les services critiques. Votre sang-froid inspire confiance lors des incidents majeurs.",
    growth_areas: "Formalisez vos connaissances tacites en proc√©dures. Prenez le temps d'analyser les causes profondes pour √©viter les r√©currences d'incidents."
  },
  preventif: { 
    name: "Le Pr√©ventif", 
    description: "Vous anticipez les risques et pr√©parez des plans de contingence. Votre vision proactive minimise les incidents et garantit la continuit√© de service.",
    strengths: "Plans de reprise d'activit√© (PRA/PCA) bien pr√©par√©s ‚Ä¢ Identification pr√©coce des points de d√©faillance uniques (SPOF) ‚Ä¢ Excellente gestion des changements avec analyse d'impact ‚Ä¢ Culture de la documentation et des proc√©dures",
    advice: "Veillez √† ne pas freiner l'innovation par exc√®s de prudence. Toutes les √©volutions ne n√©cessitent pas le m√™me niveau de pr√©paration. Adaptez votre approche au niveau de risque r√©el.",
    ideal_for: "Responsable continuit√© de service, Architecte infrastructure, Risk Manager IT",
    team_value: "Vous s√©curisez l'infrastructure en pensant aux sc√©narios catastrophes. Votre planification √©vite les mauvaises surprises et prot√®ge l'entreprise.",
    growth_areas: "Cultivez l'agilit√© en acceptant des d√©ploiements progressifs. Pratiquez l'approche 'fail fast' sur des environnements non critiques pour gagner en flexibilit√©."
  },
  methodique: { 
    name: "Le M√©thodique", 
    description: "Vous suivez des processus rigoureux et structur√©s. Votre approche ITIL garantit qualit√© et tra√ßabilit√© de toutes vos interventions.",
    strengths: "Interventions reproductibles et auditables ‚Ä¢ Respect scrupuleux des processus de changement ‚Ä¢ Qualit√© constante ind√©pendante de la pression ‚Ä¢ Formation efficace gr√¢ce √† des proc√©dures claires",
    advice: "Certaines situations d'urgence n√©cessitent de court-circuiter temporairement les processus standards. D√©veloppez votre capacit√© √† identifier quand la rigueur doit c√©der face √† l'urgence critique.",
    ideal_for: "Responsable processus IT, Coordinateur ITSM, Manager d'√©quipe technique",
    team_value: "Vous garantissez conformit√© et tra√ßabilit√©. Votre structuration professionnalise les pratiques de l'√©quipe et facilite les audits.",
    growth_areas: "D√©veloppez votre tol√©rance √† l'ambigu√Øt√© et √† l'improvisation. Exp√©rimentez des approches plus agiles sur des projets pilotes pour √©largir votre palette."
  },
  automatiseur: { 
    name: "L'Automatiseur", 
    description: "Vous cherchez constamment √† optimiser et automatiser les t√¢ches r√©p√©titives. Votre vision DevOps transforme les op√©rations manuelles en processus efficaces.",
    strengths: "Scripts et automatisations augmentant l'efficacit√© op√©rationnelle ‚Ä¢ Ma√Ætrise des outils d'orchestration (Ansible, Terraform, PowerShell) ‚Ä¢ R√©duction drastique des erreurs humaines ‚Ä¢ Vision Infrastructure as Code (IaC)",
    advice: "Documentez syst√©matiquement vos automatisations pour √©viter les 'bo√Ætes noires'. Assurez-vous que vos coll√®gues peuvent comprendre et maintenir vos scripts en votre absence.",
    ideal_for: "DevOps Engineer, Administrateur syst√®mes avanc√©, Architecte automatisation",
    team_value: "Vous lib√©rez du temps pour toute l'√©quipe en √©liminant les t√¢ches √† faible valeur ajout√©e. Vos automatisations permettent de scaler les op√©rations.",
    growth_areas: "√âquilibrez automatisation et flexibilit√©. Certaines t√¢ches peu fr√©quentes ne justifient pas l'investissement temps. Priorisez selon le ROI r√©el."
  },
  innovateur: { 
    name: "L'Innovateur", 
    description: "Vous √™tes attir√© par les nouvelles technologies et la modernisation continue. Votre veille active maintient l'infrastructure √† jour avec les meilleures pratiques du march√©.",
    strengths: "Veille technologique proactive et pertinente ‚Ä¢ Capacit√© √† √©valuer rapidement de nouvelles solutions ‚Ä¢ Pilotage de projets de transformation technique ‚Ä¢ Vision prospective de l'√©volution des syst√®mes",
    advice: "Toute technologie n'est pas bonne √† adopter. √âvaluez maturit√©, co√ªts cach√©s et impact organisationnel. Privil√©giez innovation incr√©mentale sur refonte totale pour limiter les risques.",
    ideal_for: "Lead technique, Architecte solutions, Responsable innovation IT",
    team_value: "Vous maintenez la comp√©titivit√© technique de l'organisation. Vos explorations √©vitent l'obsolescence et ouvrent de nouvelles possibilit√©s.",
    growth_areas: "Renforcez votre pragmatisme en √©quilibrant 'shiny new tech' et stabilit√© op√©rationnelle. Apprenez √† valoriser l'excellence sur les syst√®mes existants."
  },
  securitaire: { 
    name: "Le Gardien", 
    description: "La s√©curit√© et la conformit√© sont vos priorit√©s absolues. Votre vigilance prot√®ge l'entreprise contre les menaces internes et externes.",
    strengths: "Vision holistique de la s√©curit√© (d√©fense en profondeur) ‚Ä¢ Ma√Ætrise des standards et r√©glementations (ISO 27001, RGPD) ‚Ä¢ Gestion proactive des vuln√©rabilit√©s et des patches ‚Ä¢ Culture du moindre privil√®ge et de la segmentation",
    advice: "La s√©curit√© doit √™tre un facilitateur, pas un frein. Travaillez avec les utilisateurs pour trouver des solutions s√©curis√©es ET utilisables. L'exc√®s de contraintes cr√©e des contournements risqu√©s.",
    ideal_for: "Administrateur s√©curit√©, Responsable conformit√© IT, Architecte cybers√©curit√©",
    team_value: "Vous prot√©gez l'entreprise et ses donn√©es. Votre rigueur √©vite les incidents de s√©curit√© co√ªteux et garantit la conformit√© r√©glementaire.",
    growth_areas: "D√©veloppez votre intelligence situationnelle pour adapter le niveau de s√©curit√© au contexte m√©tier. Pratiquez l'approche 'security by design' plut√¥t que 'security by constraint'."
  },
  communicant: { 
    name: "Le Communicant", 
    description: "Vous excellez dans la communication technique et la coordination. Votre capacit√© √† vulgariser et √† f√©d√©rer fait de vous un lien essentiel entre IT et m√©tiers.",
    strengths: "Excellente gestion de la relation utilisateurs ‚Ä¢ Capacit√© √† traduire le technique en langage m√©tier ‚Ä¢ Animation efficace de r√©unions et d'ateliers ‚Ä¢ Gestion transparente des incidents avec les parties prenantes",
    advice: "Maintenez et approfondissez votre expertise technique pour conserver cr√©dibilit√© et pertinence. Un excellent communicant sans comp√©tences techniques solides perd en impact.",
    ideal_for: "Service Delivery Manager, IT Business Partner, Coordinateur projets techniques",
    team_value: "Vous humanisez l'IT et facilitez l'adoption des solutions. Votre diplomatie r√©sout les conflits et am√©liore la satisfaction utilisateurs.",
    growth_areas: "Renforcez vos comp√©tences techniques hands-on pour garder le contact avec la r√©alit√© terrain. Participez r√©guli√®rement √† des interventions techniques."
  },
  strategique: { 
    name: "Le Strat√®ge", 
    description: "Vous planifiez et orchestrez avec vision √† long terme. Votre capacit√© √† voir l'ensemble permet d'aligner infrastructure technique et objectifs business.",
    strengths: "Roadmaps techniques coh√©rentes et r√©alistes ‚Ä¢ Excellente priorisation des investissements IT ‚Ä¢ Gestion complexe de projets multi-√©quipes ‚Ä¢ Vision d'ensemble √©vitant les silos techniques",
    advice: "Restez connect√© aux r√©alit√©s op√©rationnelles quotidiennes. Une strat√©gie brillante d√©connect√©e du terrain est vou√©e √† l'√©chec. √âchangez r√©guli√®rement avec les op√©rationnels.",
    ideal_for: "Architecte d'entreprise, Directeur infrastructure, IT Manager",
    team_value: "Vous donnez une direction claire et coh√©rente √† l'√©volution technique. Votre vision √©vite les investissements redondants et optimise les ressources.",
    growth_areas: "Pratiquez l'ex√©cution op√©rationnelle pour affiner votre compr√©hension des contraintes terrain. Les meilleures strat√©gies naissent de l'exp√©rience pratique."
  },
  vigilant: { 
    name: "Le Vigilant", 
    description: "Vous surveillez constamment l'√©tat de votre infrastructure. Votre monitoring proactif d√©tecte les anomalies avant qu'elles ne deviennent des incidents.",
    strengths: "Syst√®mes de monitoring complets et pertinents ‚Ä¢ D√©tection pr√©coce des d√©gradations de performance ‚Ä¢ Analyse des tendances pour pr√©dire les probl√®mes ‚Ä¢ Culture du dashboard et de la visualisation",
    advice: "√âvitez la fatigue d'alerte en affinant vos seuils de surveillance. Trop d'alertes tue l'alerte. Concentrez-vous sur les m√©triques vraiment critiques et actionnables.",
    ideal_for: "Administrateur monitoring, SRE (Site Reliability Engineer), NOC Manager",
    team_value: "Vous √™tes les yeux de l'infrastructure. Votre veille permet d'agir avant que les utilisateurs ne soient impact√©s, garantissant une haute disponibilit√©.",
    growth_areas: "D√©veloppez l'analyse pr√©dictive et l'intelligence artificielle pour anticiper plut√¥t que r√©agir. Passez du monitoring r√©actif au monitoring pr√©dictif."
  },
  problem_solver: { 
    name: "Le R√©solveur", 
    description: "Vous adorez les d√©fis techniques complexes et trouvez toujours une solution. Votre cr√©ativit√© technique et votre pers√©v√©rance viennent √† bout des probl√®mes les plus ardus.",
    strengths: "Excellente capacit√© de troubleshooting sur probl√®mes complexes ‚Ä¢ Cr√©ativit√© pour trouver des solutions non conventionnelles ‚Ä¢ Pers√©v√©rance face aux blocages techniques ‚Ä¢ Apprentissage rapide de nouvelles technologies",
    advice: "Capitalisez sur vos r√©solutions en cr√©ant des bases de connaissances. Vos d√©couvertes b√©n√©ficieront √† toute l'√©quipe et √©viteront de r√©inventer la roue.",
    ideal_for: "Expert technique, Troubleshooter senior, Technical Lead",
    team_value: "Vous d√©verrouillez les situations bloquantes. L'√©quipe sait qu'elle peut compter sur vous pour les probl√®mes que personne d'autre ne r√©sout.",
    growth_areas: "Formalisez votre m√©thodologie de r√©solution pour la transmettre. Votre talent serait d√©cupl√© en formant d'autres √† votre approche."
  },
  collaboratif: {
    name: "Le Collaboratif",
    description: "Le travail d'√©quipe et le partage de connaissances sont au c≈ìur de votre approche. Vous cr√©ez une dynamique positive et augmentez les comp√©tences collectives.",
    strengths: "Excellente synergie d'√©quipe gr√¢ce √† votre attitude positive ‚Ä¢ Partage spontan√© de connaissances et mentoring informel ‚Ä¢ Facilitation de la communication inter-√©quipes ‚Ä¢ Culture du feedback constructif",
    advice: "D√©veloppez √©galement votre autonomie compl√®te sur certains domaines. √ätre capable de g√©rer seul des situations critiques renforce votre valeur et votre polyvalence.",
    ideal_for: "Team Leader technique, Scrum Master IT, Coach technique",
    team_value: "Vous √™tes le ciment de l'√©quipe. Votre attitude collaborative am√©liore l'ambiance et l'efficacit√© collective, r√©duisant les silos de connaissances.",
    growth_areas: "Renforcez votre capacit√© √† travailler en autonomie compl√®te. Les meilleures personnes collaboratives savent aussi √™tre ind√©pendantes quand n√©cessaire."
  },
  optimiseur: {
    name: "L'Optimiseur",
    description: "Performances et efficacit√© maximales guident toutes vos actions. Votre obsession du tuning extrait le meilleur de chaque syst√®me.",
    strengths: "Tuning syst√®me pouss√© pour performances optimales ‚Ä¢ Culture du benchmarking et de la mesure ‚Ä¢ Identification des goulots d'√©tranglement ‚Ä¢ Optimisation des co√ªts infrastructure (FinOps)",
    advice: "Attention √† ne pas sacrifier la maintenabilit√© pour quelques pourcents de performance. Parfois, une solution simple et stable vaut mieux qu'une optimisation complexe et fragile.",
    ideal_for: "Performance Engineer, Architecte infrastructure, Capacity Planner",
    team_value: "Vous maximisez le retour sur investissement mat√©riel. Vos optimisations retardent les besoins d'upgrade et r√©duisent les co√ªts op√©rationnels.",
    growth_areas: "√âlargissez votre vision au-del√† de la performance pure. Int√©grez maintenabilit√©, √©volutivit√© et simplicit√© dans vos crit√®res d'optimisation."
  }
};

export default function ITPersonalityTest() {
  const [currentQuestion, setCurrentQuestion] = useState(0);
  const [answers, setAnswers] = useState({});
  const [showResults, setShowResults] = useState(false);

  const handleAnswer = (questionId, profile) => {
    const newAnswers = { ...answers, [questionId]: profile };
    setAnswers(newAnswers);

    if (currentQuestion < questions.length - 1) {
      setCurrentQuestion(currentQuestion + 1);
    } else {
      setShowResults(true);
    }
  };

  const calculateResults = () => {
    const profileCounts = {};
    Object.values(answers).forEach(profile => {
      profileCounts[profile] = (profileCounts[profile] || 0) + 1;
    });

    const sorted = Object.entries(profileCounts)
      .sort(([, a], [, b]) => b - a)
      .slice(0, 2);

    return sorted;
  };

  const resetTest = () => {
    setCurrentQuestion(0);
    setAnswers({});
    setShowResults(false);
  };

  const goToQuestion = (index) => {
    if (index < currentQuestion || answers[questions[index].id]) {
      setCurrentQuestion(index);
      setShowResults(false);
    }
  };

  if (showResults) {
    const results = calculateResults();
    const total = Object.keys(answers).length;
    const [primary, secondary] = results;

    return (
      <div className="min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 p-6">
        <div className="max-w-5xl mx-auto">
          <div className="bg-white rounded-3xl shadow-2xl overflow-hidden">
            
            {/* Header */}
            <div className="bg-gradient-to-r from-blue-600 to-indigo-700 p-8 text-white">
              <div className="flex items-center gap-4 mb-4">
                <Award className="w-12 h-12" />
                <div>
                  <h2 className="text-4xl font-bold">Votre Profil IT</h2>
                  <p className="text-blue-100 mt-1">Analyse de personnalit√© professionnelle</p>
                </div>
              </div>
            </div>

            {/* Main Profile */}
            <div className="p-8">
              <div className="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-8 mb-6 border-2 border-blue-200">
                <div className="flex items-center justify-between mb-4">
                  <div className="flex items-center gap-3">
                    <div className="w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center text-white text-xl font-bold">
                      1
                    </div>
                    <div>
                      <h3 className="text-3xl font-bold text-gray-900">
                        {profiles[primary[0]]?.name}
                      </h3>
                      <p className="text-blue-700 font-medium">Profil Dominant</p>
                    </div>
                  </div>
                  <div className="text-right">
                    <div className="text-4xl font-bold text-blue-600">
                      {Math.round((primary[1] / total) * 100)}%
                    </div>
                    <p className="text-sm text-gray-600">{primary[1]}/{total} r√©ponses</p>
                  </div>
                </div>
                
                <p className="text-lg text-gray-700 mb-4 leading-relaxed">
                  {profiles[primary[0]]?.description}
                </p>

                <div className="grid md:grid-cols-2 gap-4 mt-6">
                  <div className="bg-white rounded-lg p-4 border border-green-200">
                    <div className="flex items-center gap-2 mb-2">
                      <TrendingUp className="w-5 h-5 text-green-600" />
                      <h4 className="font-semibold text-green-900">Points Forts</h4>
                    </div>
                    <p className="text-gray-700 text-sm">
                      {profiles[primary[0]]?.strengths}
                    </p>
                  </div>
                  <div className="bg-white rounded-lg p-4 border border-amber-200">
                    <div className="flex items-center gap-2 mb-2">
                      <svg className="w-5 h-5 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                      </svg>
                      <h4 className="font-semibold text-amber-900">Conseil de D√©veloppement</h4>
                    </div>
                    <p className="text-gray-700 text-sm">
                      {profiles[primary[0]]?.advice}
                    </p>
                  </div>
                </div>
              </div>

              {/* Secondary Profile */}
              {secondary && (
                <div className="bg-gradient-to-br from-slate-50 to-gray-50 rounded-2xl p-8 border-2 border-slate-200">
                  <div className="flex items-center justify-between mb-4">
                    <div className="flex items-center gap-3">
                      <div className="w-12 h-12 bg-slate-600 rounded-full flex items-center justify-center text-white text-xl font-bold">
                        2
                      </div>
                      <div>
                        <h3 className="text-2xl font-bold text-gray-900">
                          {profiles[secondary[0]]?.name}
                        </h3>
                        <p className="text-slate-700 font-medium">Profil Secondaire</p>
                      </div>
                    </div>
                    <div className="text-right">
                      <div className="text-3xl font-bold text-slate-600">
                        {Math.round((secondary[1] / total) * 100)}%
                      </div>
                      <p className="text-sm text-gray-600">{secondary[1]}/{total} r√©ponses</p>
                    </div>
                  </div>
                  
                  <p className="text-gray-700 mb-4 leading-relaxed">
                    {profiles[secondary[0]]?.description}
                  </p>

                  <div className="grid md:grid-cols-2 gap-4 mt-6">
                    <div className="bg-white rounded-lg p-4 border border-green-200">
                      <div className="flex items-center gap-2 mb-2">
                        <TrendingUp className="w-5 h-5 text-green-600" />
                        <h4 className="font-semibold text-green-900">Points Forts</h4>
                      </div>
                      <p className="text-gray-700 text-sm">
                        {profiles[secondary[0]]?.strengths}
                      </p>
                    </div>
                    <div className="bg-white rounded-lg p-4 border border-amber-200">
                      <div className="flex items-center gap-2 mb-2">
                        <svg className="w-5 h-5 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                        </svg>
                        <h4 className="font-semibold text-amber-900">Conseil de D√©veloppement</h4>
                      </div>
                      <p className="text-gray-700 text-sm">
                        {profiles[secondary[0]]?.advice}
                      </p>
                    </div>
                  </div>
                </div>
              )}

              {/* Synthesis */}
              <div className="mt-8 bg-indigo-50 rounded-xl p-6 border border-indigo-200">
                <h4 className="font-bold text-indigo-900 text-lg mb-3">üí° Synth√®se de votre profil</h4>
                <p className="text-gray-700 leading-relaxed">
                  Votre profil combine les qualit√©s de <strong>{profiles[primary[0]]?.name}</strong> et de <strong>{profiles[secondary[0]]?.name}</strong>. 
                  Cette combinaison vous permet d'aborder les d√©fis techniques avec {profiles[primary[0]]?.name.toLowerCase() === "l'analyste" ? "m√©thode et rigueur" : "efficacit√© et pragmatisme"} 
                  tout en {profiles[secondary[0]]?.name.toLowerCase() === "le communicant" ? "maintenant une excellente communication" : "gardant une vision strat√©gique"}. 
                  Vous √™tes particuli√®rement adapt√© aux r√¥les n√©cessitant ces deux dimensions compl√©mentaires.
                </p>
              </div>

              <button
                onClick={resetTest}
                className="w-full mt-8 py-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 transition font-semibold text-lg shadow-lg"
              >
                Recommencer le test
              </button>
            </div>
          </div>
        </div>
      </div>
    );
  }

  const progress = ((currentQuestion + 1) / questions.length) * 100;
  const question = questions[currentQuestion];

  return (
    <div className="min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 p-6">
      <div className="max-w-3xl mx-auto">
        <div className="bg-white rounded-2xl shadow-xl p-8">
          <div className="flex items-center gap-3 mb-6">
            <User className="w-8 h-8 text-blue-600" />
            <div>
              <h1 className="text-3xl font-bold text-gray-800">Test de Personnalit√© IT</h1>
              <p className="text-gray-600">Techniciens & Administrateurs Syst√®mes/R√©seaux</p>
            </div>
          </div>

          <div className="mb-6">
            <div className="flex justify-between text-sm text-gray-600 mb-2">
              <span>Question {currentQuestion + 1} sur {questions.length}</span>
              <span>{Math.round(progress)}%</span>
            </div>
            <div className="w-full bg-gray-200 rounded-full h-3">
              <div
                className="bg-gradient-to-r from-blue-600 to-indigo-600 h-3 rounded-full transition-all duration-300"
                style={{ width: `${progress}%` }}
              />
            </div>
          </div>

          <div className="flex flex-wrap gap-2 mb-6">
            {questions.map((q, index) => (
              <button
                key={q.id}
                onClick={() => goToQuestion(index)}
                className={`w-10 h-10 rounded-full text-sm font-medium transition ${
                  answers[q.id]
                    ? 'bg-green-500 text-white shadow-md'
                    : index === currentQuestion
                    ? 'bg-blue-600 text-white shadow-md'
                    : 'bg-gray-200 text-gray-600 cursor-not-allowed'
                }`}
                disabled={index > currentQuestion && !answers[q.id]}
              >
                {index + 1}
              </button>
            ))}
          </div>

          <div className="mb-8">
            <h2 className="text-xl font-semibold text-gray-800 mb-6">
              {question.text}
            </h2>

            <div className="space-y-3">
              {question.options.map((option, index) => (
                <button
                  key={index}
                  onClick={() => handleAnswer(question.id, option.profile)}
                  className="w-full p-4 text-left border-2 border-gray-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition group"
                >
                  <div className="flex items-center gap-3">
                    <div className="w-6 h-6 rounded-full border-2 border-gray-300 group-hover:border-blue-500 flex items-center justify-center flex-shrink-0">
                      {answers[question.id] === option.profile && (
                        <CheckCircle className="w-5 h-5 text-blue-600" />
                      )}
                    </div>
                    <span className="text-gray-700 group-hover:text-gray-900">
                      {option.text}
                    </span>
                  </div>
                </button>
              ))}
            </div>
          </div>

          {currentQuestion > 0 && (
            <button
              onClick={() => setCurrentQuestion(currentQuestion - 1)}
              className="text-blue-600 hover:text-blue-700 font-medium flex items-center gap-2"
            >
              <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 19l-7-7 7-7" />
              </svg>
              Question pr√©c√©dente
            </button>
          )}
        </div>
      </div>
    </div>
  );
}
